<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="16" height="15" tilewidth="16" tileheight="16">
 <properties>
  <property name="music" value="ThroneRoom.ogg"/>
 </properties>
 <tileset firstgid="1" name="DqTileset" tilewidth="16" tileheight="16">
  <image source="../Tilesets/DqTileset.png" width="96" height="320"/>
 </tileset>
 <tileset firstgid="121" name="Hero2" tilewidth="16" tileheight="16">
  <image source="../Spritesheets/Hero2.png" width="160" height="128"/>
 </tileset>
 <layer name="blocking" width="16" height="15">
  <data encoding="csv">
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,
2,0,0,2,0,0,2,0,2,0,0,0,2,0,0,2,
2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,
2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,
2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,
2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,
0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,
2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,
2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,
2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,2,
2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,2,
2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,2,
2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
</data>
 </layer>
 <layer name="Tile Layer 1" width="16" height="15">
  <data encoding="csv">
11,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
10,10,10,10,10,11,10,5,10,11,10,10,10,10,10,10,
5,5,5,5,5,11,5,5,5,11,5,5,5,5,5,5,
11,10,10,10,10,11,5,5,5,11,10,10,10,10,10,11,
11,5,5,5,5,5,5,5,5,5,5,5,5,5,5,11,
11,5,5,5,5,11,5,5,5,11,5,5,5,5,5,11,
11,5,5,5,5,11,5,5,5,11,5,5,5,5,5,11,
11,5,5,5,5,11,5,5,5,11,5,5,5,5,5,11,
10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10
</data>
 </layer>
 <layer name="Tile Layer 2" width="16" height="15">
  <data encoding="csv">
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,79,0,0,85,0,85,0,0,0,79,0,0,0,
0,0,0,78,0,0,0,0,0,0,0,0,78,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,79,0,0,0,0,0,0,0,0,79,0,0,0,
0,0,0,78,0,0,0,0,0,0,0,0,78,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,62,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
</data>
 </layer>
 <objectgroup name="Object Layer 1" width="16" height="15">
  <object name="door" gid="66" x="112" y="128">
   <properties>
    <property name="stepScript">
        if local[open] == const[true]
          set_tile_id 0
          set_walkthrough true
        endif
      </property>
    <property name="talkScript">
        if item[Key] &gt;= const[1]
          if local[open] == const[false]
            play_sound Open1.wav
            set_tile_id 0
            set_local open true
            take_item 1 Key
            message You use a Key to open the door.
          endif
        else
          if local[open] == const[false]
            message This door is locked.
          endif
        endif
      </property>
   </properties>
  </object>
  <object name="door2" gid="66" x="80" y="176">
   <properties>
    <property name="stepScript">
        if local[open] == const[true]
          set_tile_id 0
          set_walkthrough true
        endif
      </property>
    <property name="talkScript">
        if item[Key] &gt;= const[1]
          if local[open] == const[false]
            play_sound Open1.wav
            set_tile_id 0
            set_local open true
            take_item 1 Key
            message You use a Key to open the door.
          endif
        else
          if local[open] == const[false]
            message This door is locked.
          endif
        endif
      </property>
   </properties>
  </object>
  <object name="door3" gid="66" x="144" y="176">
   <properties>
    <property name="stepScript">
        if local[open] == const[true]
          set_tile_id 0
          set_walkthrough true
        endif
      </property>
    <property name="talkScript">
        if item[Key] &gt;= const[1]
          if local[open] == const[false]
            play_sound Open1.wav
            set_tile_id 0
            set_local open true
            take_item 1 Key
            message You use a Key to open the door.
          endif
        else
          if local[open] == const[false]
            message This door is locked.
          endif
        endif
      </property>
   </properties>
  </object>
  <object name="king" gid="125" x="112" y="32">
   <properties>
    <property name="stepScript">
      if global[wonGame] == const[true]
        show_picture King.png 0 48
        message Congratulations! You have defeated the Dark Lord!
        message For this, I dub you Knight of the Kingdom. Now hero, go on to new adventures!
        hide_picture King.png
        message THANKS FOR PLAYING!!!!!!
        end_game
      endif
    </property>
    <property name="talkScript">
      if local[talked] == const[false]
        show_picture King.png 0 48
        message Ah, hero! You have finally arrived. Please hero, you must find the Dark Lord and slay him once and for all. Take the items you need from these chests and proceed with your quest.
        hide_picture King.png
        set_local talked true
      else
        show_picture King.png 0 48
        message Good luck, hero.
        hide_picture King.png
      endif
    </property>
   </properties>
  </object>
  <object gid="167" x="80" y="64">
   <properties>
    <property name="talkScript" value="message Good luck on yer quest, hero."/>
   </properties>
  </object>
  <object gid="177" x="144" y="64">
   <properties>
    <property name="talkScript" value="message Best of wishes to ye, hero."/>
   </properties>
  </object>
  <object gid="167" x="96" y="160">
   <properties>
    <property name="talkScript" value="message This is ye royale treasury."/>
   </properties>
  </object>
  <object gid="177" x="128" y="160">
   <properties>
    <property name="talkScript" value="message To enter here ye need a key."/>
   </properties>
  </object>
  <object name="herbChest" gid="129" x="48" y="176">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found a Herb!
        give_item 1 Herb
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="keyChest" gid="129" x="144" y="32">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found a Key!
        give_item 1 Key
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="goldChest" gid="129" x="160" y="32">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found 100 gold!
        give_gold 100
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="weaponChest" gid="129" x="176" y="32">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found a Copper Sword!
        give_item 1 Copper Sword
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="warp" x="112" y="192" width="16" height="16">
   <properties>
    <property name="destMap" value="WorldMap.tmx"/>
    <property name="destX" value="22"/>
    <property name="destY" value="22"/>
   </properties>
  </object>
  <object name="mimicKeyChest1" gid="129" x="16" y="176">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Oh horrors! This chest is a mimic!
        combat_no_escape Mimic
        set_local open true
        message The mimic left a key.
        give_item 1 Key
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="phoenixChest" gid="129" x="48" y="208">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found a Phoenix!
        give_item 1 Phoenix
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="secretGoldChest" gid="129" x="16" y="208">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found 250 gold!
        give_gold 250
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="mimicKeyChest2" gid="129" x="224" y="176">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Oh horrors! This chest is a mimic!
        combat_no_escape Mimic
        message The mimic left a key.
        give_item 1 Key
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="secretGoldChest2" gid="129" x="192" y="176">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found 250 gold!
        give_gold 250
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="antidoteChest" gid="129" x="224" y="208">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found an Antidote!
        give_item 1 Antidote
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object name="herbChest2" gid="129" x="192" y="208">
   <properties>
    <property name="fixedDirection" value="true"/>
    <property name="stepScript">
      if local[open] == const[true]
        set_dir DIR_DOWN
      endif
    </property>
    <property name="talkScript">
      if local[open] == const[false]
        play_sound Open1.wav
        set_dir DIR_DOWN
        message Found a Herb!
        give_item 1 Herb
        set_local open true
      else
        message Empty...
      endif
    </property>
   </properties>
  </object>
  <object gid="197" x="32" y="176">
   <properties>
    <property name="talkScript" value="message Beware! A horrid beasts hides in one of these chests!"/>
   </properties>
  </object>
 </objectgroup>
</map>
